<!DOCTYPE html>
<html>
<head>
  <title>Mappa Parchi di Trento</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    html, body { height: 100%; margin: 0; }
    #mappa { height: 100%; width: 100%; }
    .leaflet-top.leaflet-left .dropdown-menu { background: white; border-radius: 4px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); padding: 5px 10px; display: none; position: absolute; z-index: 1000; top: 30px; left: 5px; min-width: 140px;}
    .leaflet-top.leaflet-left .dropdown-menu a { display: block; padding: 4px 0; text-decoration: none; color: #333; cursor: pointer;}
    .leaflet-top.leaflet-left .dropdown-menu a:hover { background-color: #f0f0f0;}
    .dropdown-btn { background: white; border-radius: 4px; border: 1px solid #ccc; cursor: pointer; padding: 4px 8px; font-weight: bold; user-select: none;}
  </style>
</head>
<body>
<div id="mappa"></div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
var mappa = L.map('mappa', {
  center: [46.07, 11.12],
  zoom: 12,
  minZoom: 10,
  maxZoom: 17,
  scrollWheelZoom: true,
  doubleClickZoom: true,
  boxZoom: true,
  keyboard: true,
  touchZoom: true,
  zoomControl: false
});
L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
  attribution: '&copy; OpenStreetMap &copy; CARTO'
}).addTo(mappa);
L.control.zoom({ position: 'bottomleft' }).addTo(mappa);

// Dropdown menu
var DropdownMenu = L.Control.extend({
  options: { position: 'topleft' },
  onAdd: function(map) {
    var container = L.DomUtil.create('div', 'leaflet-bar dropdown-container');
    var btn = L.DomUtil.create('a', 'dropdown-btn', container);
    btn.innerHTML = 'Menu ▼';
    var menu = L.DomUtil.create('div', 'dropdown-menu', container);
    var items = [
      { text: 'News', href: '#' },
      { text: 'Login', href: '#' },
      { text: 'Invia segnalazione', href: '#' },
      { text: 'Profilo', href: '#' }
    ];
    items.forEach(function(item) {
      var link = L.DomUtil.create('a', '', menu);
      link.innerText = item.text;
      link.href = item.href;
      L.DomEvent.disableClickPropagation(link);
    });
    L.DomEvent.on(btn, 'click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
    });
    map.on('click', function() { menu.style.display = 'none'; });
    L.DomEvent.disableClickPropagation(container);
    L.DomEvent.disableScrollPropagation(container);
    return container;
  }
});
mappa.addControl(new DropdownMenu());

// Stile icona parchi (dimensione e anchor come Alexander Langer)
var parkIconBase = L.icon({
  iconUrl: 'icona.png',
  iconSize: [48, 48],
  iconAnchor: [24, 48],
  popupAnchor: [0, -48]
});

// Parco di test: Giardino Alexander Langer
var coordsGiardinoAlexanderLanger = [46.0549, 11.1251];
var giardino = L.marker(coordsGiardinoAlexanderLanger, { icon: parkIconBase }).addTo(mappa);
giardino.bindPopup(`
  <div class="popup-scheda">
    <h3>Giardino Alexander Langer</h3>
    <p><b>Area:</b> 1.2 ha</p>
    <p><b>Tipologia:</b> Parco urbano</p>
    <p><b>Apertura:</b> 08:00 - 20:00</p>
    <p><b>Note:</b> Ideale per ubriacarsi e fare rissa.</p>
  </div>
`);

// Altri parchi cittadini
var parks = [
  {
    nome: "Parco Bosco della Città",
    coords: [46.0344750, 11.1428669],
    info: "Località S. Rocco, Trento"
  },
  {
    nome: "Giardino Rosanna Carrozzini",
    coords: [46.03789, 11.12884],
    info: "Via di Stella di Man, 57, Trento"
  },
  {
    nome: "Giardino Maria Teresa d'Amburgo",
    coords: [46.056037, 11.126992],
    info: "Via Anna Frank, Trento"
  },
  {
    nome: "Parco Gocciadoro",
    coords: [46.056508, 11.137302],
    info: "Via Vicenza, Trento"
  },
  {
    nome: "Giardino Fratelli Bernardi",
    coords: [46.061120, 11.126818],
    info: "Lungo Fersina, Trento"
  },
  {
    nome: "Parco Fratelli Michelin",
    coords: [46.080888, 11.113087],
    info: "Via Roberto da Sanseverino, Trento"
  },
  {
    nome: "Parco Giochi Lodron",
    coords: [46.0677885, 11.1234028],
    info: "Piazza Lodron, Trento"
  },
  {
    nome: "Parco delle Coste",
    coords: [46.080222, 11.134861],
    info: "Località Fontanasanta, Trento"
  },
  {
    nome: "Giardino Martignano",
    coords: [46.089022, 11.150937],
    info: "Via Martignano, Trento"
  },
  {
    nome: "Parco di Melta",
    coords: [46.081920, 11.119470],
    info: "Melta, Trento"
  },
  {
    nome: "Parco Roncafort",
    coords: [46.099990, 11.102150],
    info: "Roncafort, Trento"
  }
];

parks.forEach(function(parco) {
  var marker = L.marker(parco.coords, { icon: parkIconBase }).addTo(mappa);
  marker.bindPopup(`
    <div class="popup-scheda">
      <h3>${parco.nome}</h3>
      <p><b>Località:</b> ${parco.info}</p>
      <p><b>Tipologia:</b> Parco urbano</p>
      <p><b>Apertura:</b> 08:00 - 20:00</p>
      <p><b>Note:</b> Spazio verde pubblico</p>
    </div>
  `);
});
</script>
</body>
</html>
